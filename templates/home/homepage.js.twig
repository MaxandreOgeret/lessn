$( document ).on('submit', $('#home_form'), function (e) {
    e.preventDefault();

    linkValue = $('#home_form #link_URL').val();

    if (linkValue !== '') {

        if (!startsWith(linkValue, 'http') && !linkValue.includes('://') && linkValue !== '') {
            linkValue = "http://"+linkValue;
        }

        $('#home_form #link_URL').val(linkValue);

        $.ajax({
            type: 'POST',
            url: "{{ path('app_handle_home_form') }}",
            data: $('#home_form').serialize(),
            dataType: 'json',
            success: homeFormSuccess
        });
    }
});

$( document ).on('click', '#reset-home', function (e) {
    $.ajax({
        type: 'POST',
        url: "{{ path('app_handle_home_form') }}",
        success: function (data) {$('#home_form_container').html(data);}
    });
});

$( document ).on('click', '#condition_use', function (e) {
    $.ajax({
        type: 'POST',
        url: "{{ path('app_condition_use') }}",
        success: function (data) {$('#home_form_container').html(data);}
    });
});

function homeFormSuccess(data) {
    $('#home_form_container').html(data);
}

function startsWith(str, word) {
    return str.lastIndexOf(word, 0) === 0;
}

{% if (not (app.session.get('cookie_agree')|default('false') == 'true' or
    app.request.cookies.get('cookie_agree')|default('false') == 'true')) %}

    $('#main_modal').modal('show');
{% endif %}

$( document ).on('click', '#cookie-agree', function (e) {
    $.ajax({
        type: 'POST',
        url: "{{ path('app_cookie_agree') }}",
    });
});